<!DOCTYPE html><html><head>
      <title>AD T-02_P1</title>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      
      <link rel="stylesheet" href="file:///c:\Users\ismae\.vscode\extensions\shd101wyy.markdown-preview-enhanced-0.6.0\node_modules\@shd101wyy\mume\dependencies\katex\katex.min.css">
      
      
      
      
      
      
      
      
      
      <style>
      /**
 * prism.js Github theme based on GitHub's theme.
 * @author Sam Clarke
 */
code[class*="language-"],
pre[class*="language-"] {
  color: #333;
  background: none;
  font-family: Consolas, "Liberation Mono", Menlo, Courier, monospace;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.4;

  -moz-tab-size: 8;
  -o-tab-size: 8;
  tab-size: 8;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

/* Code blocks */
pre[class*="language-"] {
  padding: .8em;
  overflow: auto;
  /* border: 1px solid #ddd; */
  border-radius: 3px;
  /* background: #fff; */
  background: #f5f5f5;
}

/* Inline code */
:not(pre) > code[class*="language-"] {
  padding: .1em;
  border-radius: .3em;
  white-space: normal;
  background: #f5f5f5;
}

.token.comment,
.token.blockquote {
  color: #969896;
}

.token.cdata {
  color: #183691;
}

.token.doctype,
.token.punctuation,
.token.variable,
.token.macro.property {
  color: #333;
}

.token.operator,
.token.important,
.token.keyword,
.token.rule,
.token.builtin {
  color: #a71d5d;
}

.token.string,
.token.url,
.token.regex,
.token.attr-value {
  color: #183691;
}

.token.property,
.token.number,
.token.boolean,
.token.entity,
.token.atrule,
.token.constant,
.token.symbol,
.token.command,
.token.code {
  color: #0086b3;
}

.token.tag,
.token.selector,
.token.prolog {
  color: #63a35c;
}

.token.function,
.token.namespace,
.token.pseudo-element,
.token.class,
.token.class-name,
.token.pseudo-class,
.token.id,
.token.url-reference .token.variable,
.token.attr-name {
  color: #795da3;
}

.token.entity {
  cursor: help;
}

.token.title,
.token.title .token.punctuation {
  font-weight: bold;
  color: #1d3e81;
}

.token.list {
  color: #ed6a43;
}

.token.inserted {
  background-color: #eaffea;
  color: #55a532;
}

.token.deleted {
  background-color: #ffecec;
  color: #bd2c00;
}

.token.bold {
  font-weight: bold;
}

.token.italic {
  font-style: italic;
}


/* JSON */
.language-json .token.property {
  color: #183691;
}

.language-markup .token.tag .token.punctuation {
  color: #333;
}

/* CSS */
code.language-css,
.language-css .token.function {
  color: #0086b3;
}

/* YAML */
.language-yaml .token.atrule {
  color: #63a35c;
}

code.language-yaml {
  color: #183691;
}

/* Ruby */
.language-ruby .token.function {
  color: #333;
}

/* Markdown */
.language-markdown .token.url {
  color: #795da3;
}

/* Makefile */
.language-makefile .token.symbol {
  color: #795da3;
}

.language-makefile .token.variable {
  color: #183691;
}

.language-makefile .token.builtin {
  color: #0086b3;
}

/* Bash */
.language-bash .token.keyword {
  color: #0086b3;
}

/* highlight */
pre[data-line] {
  position: relative;
  padding: 1em 0 1em 3em;
}
pre[data-line] .line-highlight-wrapper {
  position: absolute;
  top: 0;
  left: 0;
  background-color: transparent;
  display: block;
  width: 100%;
}

pre[data-line] .line-highlight {
  position: absolute;
  left: 0;
  right: 0;
  padding: inherit 0;
  margin-top: 1em;
  background: hsla(24, 20%, 50%,.08);
  background: linear-gradient(to right, hsla(24, 20%, 50%,.1) 70%, hsla(24, 20%, 50%,0));
  pointer-events: none;
  line-height: inherit;
  white-space: pre;
}

pre[data-line] .line-highlight:before, 
pre[data-line] .line-highlight[data-end]:after {
  content: attr(data-start);
  position: absolute;
  top: .4em;
  left: .6em;
  min-width: 1em;
  padding: 0 .5em;
  background-color: hsla(24, 20%, 50%,.4);
  color: hsl(24, 20%, 95%);
  font: bold 65%/1.5 sans-serif;
  text-align: center;
  vertical-align: .3em;
  border-radius: 999px;
  text-shadow: none;
  box-shadow: 0 1px white;
}

pre[data-line] .line-highlight[data-end]:after {
  content: attr(data-end);
  top: auto;
  bottom: .4em;
}html body{font-family:"Helvetica Neue",Helvetica,"Segoe UI",Arial,freesans,sans-serif;font-size:16px;line-height:1.6;color:#333;background-color:#fff;overflow:initial;box-sizing:border-box;word-wrap:break-word}html body>:first-child{margin-top:0}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{line-height:1.2;margin-top:1em;margin-bottom:16px;color:#000}html body h1{font-size:2.25em;font-weight:300;padding-bottom:.3em}html body h2{font-size:1.75em;font-weight:400;padding-bottom:.3em}html body h3{font-size:1.5em;font-weight:500}html body h4{font-size:1.25em;font-weight:600}html body h5{font-size:1.1em;font-weight:600}html body h6{font-size:1em;font-weight:600}html body h1,html body h2,html body h3,html body h4,html body h5{font-weight:600}html body h5{font-size:1em}html body h6{color:#5c5c5c}html body strong{color:#000}html body del{color:#5c5c5c}html body a:not([href]){color:inherit;text-decoration:none}html body a{color:#08c;text-decoration:none}html body a:hover{color:#00a3f5;text-decoration:none}html body img{max-width:100%}html body>p{margin-top:0;margin-bottom:16px;word-wrap:break-word}html body>ul,html body>ol{margin-bottom:16px}html body ul,html body ol{padding-left:2em}html body ul.no-list,html body ol.no-list{padding:0;list-style-type:none}html body ul ul,html body ul ol,html body ol ol,html body ol ul{margin-top:0;margin-bottom:0}html body li{margin-bottom:0}html body li.task-list-item{list-style:none}html body li>p{margin-top:0;margin-bottom:0}html body .task-list-item-checkbox{margin:0 .2em .25em -1.8em;vertical-align:middle}html body .task-list-item-checkbox:hover{cursor:pointer}html body blockquote{margin:16px 0;font-size:inherit;padding:0 15px;color:#5c5c5c;background-color:#f0f0f0;border-left:4px solid #d6d6d6}html body blockquote>:first-child{margin-top:0}html body blockquote>:last-child{margin-bottom:0}html body hr{height:4px;margin:32px 0;background-color:#d6d6d6;border:0 none}html body table{margin:10px 0 15px 0;border-collapse:collapse;border-spacing:0;display:block;width:100%;overflow:auto;word-break:normal;word-break:keep-all}html body table th{font-weight:bold;color:#000}html body table td,html body table th{border:1px solid #d6d6d6;padding:6px 13px}html body dl{padding:0}html body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:bold}html body dl dd{padding:0 16px;margin-bottom:16px}html body code{font-family:Menlo,Monaco,Consolas,'Courier New',monospace;font-size:.85em !important;color:#000;background-color:#f0f0f0;border-radius:3px;padding:.2em 0}html body code::before,html body code::after{letter-spacing:-0.2em;content:"\00a0"}html body pre>code{padding:0;margin:0;font-size:.85em !important;word-break:normal;white-space:pre;background:transparent;border:0}html body .highlight{margin-bottom:16px}html body .highlight pre,html body pre{padding:1em;overflow:auto;font-size:.85em !important;line-height:1.45;border:#d6d6d6;border-radius:3px}html body .highlight pre{margin-bottom:0;word-break:normal}html body pre code,html body pre tt{display:inline;max-width:initial;padding:0;margin:0;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;border:0}html body pre code:before,html body pre tt:before,html body pre code:after,html body pre tt:after{content:normal}html body p,html body blockquote,html body ul,html body ol,html body dl,html body pre{margin-top:0;margin-bottom:16px}html body kbd{color:#000;border:1px solid #d6d6d6;border-bottom:2px solid #c7c7c7;padding:2px 4px;background-color:#f0f0f0;border-radius:3px}@media print{html body{background-color:#fff}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{color:#000;page-break-after:avoid}html body blockquote{color:#5c5c5c}html body pre{page-break-inside:avoid}html body table{display:table}html body img{display:block;max-width:100%;max-height:100%}html body pre,html body code{word-wrap:break-word;white-space:pre}}.markdown-preview{width:100%;height:100%;box-sizing:border-box}.markdown-preview .pagebreak,.markdown-preview .newpage{page-break-before:always}.markdown-preview pre.line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}.markdown-preview pre.line-numbers>code{position:relative}.markdown-preview pre.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:1em;font-size:100%;left:0;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.markdown-preview pre.line-numbers .line-numbers-rows>span{pointer-events:none;display:block;counter-increment:linenumber}.markdown-preview pre.line-numbers .line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}.markdown-preview .mathjax-exps .MathJax_Display{text-align:center !important}.markdown-preview:not([for="preview"]) .code-chunk .btn-group{display:none}.markdown-preview:not([for="preview"]) .code-chunk .status{display:none}.markdown-preview:not([for="preview"]) .code-chunk .output-div{margin-bottom:16px}.scrollbar-style::-webkit-scrollbar{width:8px}.scrollbar-style::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}.scrollbar-style::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,0.66);border:4px solid rgba(150,150,150,0.66);background-clip:content-box}html body[for="html-export"]:not([data-presentation-mode]){position:relative;width:100%;height:100%;top:0;left:0;margin:0;padding:0;overflow:auto}html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{position:relative;top:0}@media screen and (min-width:914px){html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{padding:2em calc(50% - 457px + 2em)}}@media screen and (max-width:914px){html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{font-size:14px !important;padding:1em}}@media print{html body[for="html-export"]:not([data-presentation-mode]) #sidebar-toc-btn{display:none}}html body[for="html-export"]:not([data-presentation-mode]) #sidebar-toc-btn{position:fixed;bottom:8px;left:8px;font-size:28px;cursor:pointer;color:inherit;z-index:99;width:32px;text-align:center;opacity:.4}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] #sidebar-toc-btn{opacity:1}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc{position:fixed;top:0;left:0;width:300px;height:100%;padding:32px 0 48px 0;font-size:14px;box-shadow:0 0 4px rgba(150,150,150,0.33);box-sizing:border-box;overflow:auto;background-color:inherit}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar{width:8px}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,0.66);border:4px solid rgba(150,150,150,0.66);background-clip:content-box}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc a{text-decoration:none}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc ul{padding:0 1.6em;margin-top:.8em}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc li{margin-bottom:.8em}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc ul{list-style-type:none}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{left:300px;width:calc(100% -  300px);padding:2em calc(50% - 457px -  150px);margin:0;box-sizing:border-box}@media screen and (max-width:1274px){html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{width:100%}}html body[for="html-export"]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .markdown-preview{left:50%;transform:translateX(-50%)}html body[for="html-export"]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .md-sidebar-toc{display:none}
/* Please visit the URL below for more information: */
/*   https://shd101wyy.github.io/markdown-preview-enhanced/#/customize-css */

      </style>
    </head>
    <body for="html-export">
      <div class="mume markdown-preview  ">
      <h1 class="mume-header" id="apuntes-ad-tema-02-parte-1">Apuntes AD - Tema 02 Parte 1</h1>

<ul>
<li><a href="../../index.html">Volver a asignaturas</a></li>
<li><a href="./index_ad.html">Volver a temas</a></li>
</ul>
<h2 class="mume-header" id="indice">Indice</h2>

<ul>
<li><a href="#general"><strong>General</strong></a></li>
<li><a href="#esquema-de-objetos"><strong>1. Esquema de objetos</strong></a>
<ul>
<li><a href="#ficheros-y-estructuras">1.1 Ficheros y estructuras</a></li>
<li><a href="#ficheros-binarios">1.2 Ficheros binarios</a></li>
<li><a href="#ficheros-de-texto">1.3 Ficheros de texto</a></li>
<li><a href="#ficheros-aleatorios">1.4 Ficheros aleatorios</a></li>
</ul>
</li>
<li><a href="#2-clases-asocidas-a-ficheros"><strong>2. Clases asocidas a ficheros</strong></a>
<ul>
<li><a href="#21-clase-file">2.1 Clase File</a></li>
<li><a href="#22-interfaz-filenamefilter">2.2 Interfaz FilenameFilter</a></li>
<li><a href="#23-rutas-de-los-ficheros">2.3 Rutas de los ficheros</a></li>
<li><a href="#24-creaci-n-y-eliminaci-n-de-ficheros-y-directorios">2.4 Creaci&#xF3;n y eliminaci&#xF3;n de ficheros y directorios</a></li>
</ul>
</li>
<li><a href="#3-flujos"><strong>3. Flujos</strong></a></li>
<li><a href="#4-formas-de-acceso-a-un-fichero"><strong>4. Formas de acceso a un fichero</strong></a></li>
<li><a href="#5-ficheros-de-texto"><strong>5. Ficheros de Texto</strong></a>
<ul>
<li><a href="#51-ficheros-de-texto---escritura">5.1 Ficheros de Texto - Escritura</a></li>
<li><a href="#52-ficheros-de-texto---lectura">5.2 Ficheros de Texto - Lectura</a></li>
<li><a href="#53-ficheros-de-texto---resumen">5.3 Ficheros de Texto - Resumen</a></li>
</ul>
</li>
<li><a href="#6-ficheros-binarios"><strong>6. Ficheros Binarios</strong></a>
<ul>
<li><a href="#61-ficheros-binarios---escritura">6.1 Ficheros Binarios - Escritura</a></li>
<li><a href="#62-ficheros-binarios---lectura">6.2 Ficheros Binarios - Lectura</a></li>
<li><a href="#63-ficheros-binarios---lectura-y-escritura-por-bloques">6.3 Ficheros Binarios &#x2013; Lectura y escritura por bloques</a></li>
</ul>
</li>
<li><a href="#7-acceso-secuencial"><strong>7. Acceso secuencial</strong></a></li>
<li><a href="#8-acceso-aleatorio"><strong>8. Acceso aleatorio</strong></a></li>
</ul>
<h2 class="mume-header" id="general">General</h2>

<ul>
<li>
<p>En C# tenemos varias clases <code>File</code>, <code>Directory</code>, <code>Path</code> mientras que en Java tenemos <code>File</code> unicamente.</p>
</li>
<li>
<p>Los datos guardados en ficheros se conocen como <strong>datos persistentes</strong> (siguen despu&#xE9;s de la ejecuci&#xF3;n del programa).</p>
</li>
<li>
<p>Al flujo de informaci&#xF3;n del programa al exterior es conocido como E/S</p>
</li>
<li>
<p>Las operaciones se las da <strong><a href="http://java.io">java.io</a></strong> que permite:</p>
<ul>
<li>Leer entradas</li>
<li>Escribir entradas</li>
<li>Operar ficheros del sistema</li>
<li>Gestionar serializaci&#xF3;n de objetos</li>
</ul>
</li>
</ul>
<h2 class="mume-header" id="esquema-de-objetos">Esquema de objetos</h2>

<h4 class="mume-header" id="ficheros-y-estructuras">Ficheros y estructuras</h4>

<ul>
<li>File</li>
<li>FileNameFilter</li>
</ul>
<h4 class="mume-header" id="ficheros-binarios">Ficheros binarios</h4>

<ul>
<li>FileOutputStream</li>
<li>DataOutputStream</li>
<li>FileInputStream</li>
<li>DataIntputStream</li>
</ul>
<h4 class="mume-header" id="ficheros-de-texto">Ficheros de texto</h4>

<ul>
<li>FileWriter</li>
<li>BufferedWriter</li>
<li>FileReader</li>
<li>BufferedReader</li>
</ul>
<h4 class="mume-header" id="ficheros-aleatorios">Ficheros aleatorios</h4>

<ul>
<li>RandomAccessFile</li>
</ul>
<h2 class="mume-header" id="2-clases-asocidas-a-ficheros">2. Clases asocidas a ficheros</h2>

<h3 class="mume-header" id="21-clase-file">2.1 Clase File</h3>

<ul>
<li>
<p>Ficheros y directorios.</p>
</li>
<li>
<p>Podemos examinar y manipular archivos y directorios.</p>
</li>
<li>
<p>Controlaremos excepciones en caso de que no exista el archivo.</p>
</li>
<li>
<p>Con un objeto de la clase File podemos:</p>
<ul>
<li>Renombrar archivos <code>renameTo()</code></li>
<li>Borrar archivo <code>delete()</code></li>
<li>Crear archivos temporales <code>createTempFile()</code></li>
<li>Establecer fecha y hora de modificaci&#xF3;n <code>setLastModified()</code></li>
<li>Crear un directorio <code>mkdir</code> o varios <code>mkdirs</code> (crea los superiores si no existen)</li>
<li>Listar contenido directorio <code>list</code> (=&gt; String) <code>listFiles</code> (=&gt; objetos <code>File</code>)</li>
<li>Listar nombre archivos en ra&#xED;z <code>listRoots</code></li>
</ul>
</li>
</ul>
<p><strong>Ejemplo</strong></p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">&quot;prueba.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setLastModified</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre><p><strong>Fich01aListarArchivos</strong></p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token class-name">String</span> carpete<span class="token operator">=</span><span class="token string">&quot;C:/Windows&quot;</span><span class="token punctuation">;</span>

<span class="token class-name">File</span> ruta <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>carpeta<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>ruta<span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> listaArchivos <span class="token operator">=</span> ruta<span class="token punctuation">.</span><span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>listaArchivos<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>listarArchivos<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>  
</pre><ul>
<li><strong>Path can&#xF3;nico</strong> es la ruta m&#xE1;s &#xF3;ptima posible, junto con la absoluta y relativa.</li>
</ul>
<h3 class="mume-header" id="22-interfaz-filenamefilter">2.2 Interfaz FilenameFilter</h3>

<ul>
<li>
<p>Se usa para ver archivos que coinciden con un determinado criterio:</p>
<ul>
<li>Ficheros modificados despu&#xE9;s de una fecha.</li>
<li>Ficheros con un tama&#xF1;o mayor a x.</li>
</ul>
</li>
<li>
<p>Podemos con <code>FilenameFilter</code> hacer filtros relativo al nombre de los ficheros.</p>
</li>
<li>
<p>Debemos implementar el m&#xE9;todo en la clase que usen la interfaz.</p>
</li>
</ul>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">boolean</span> <span class="token function">accept</span><span class="token punctuation">(</span><span class="token class-name">File</span> dir<span class="token punctuation">,</span> <span class="token class-name">String</span> nombre<span class="token punctuation">)</span>
</pre><ul>
<li>Este m&#xE9;todo devuelve un <code>true</code> en caso de que coincida.</li>
</ul>
<p><strong>E - Listamos ficheros con extensi&#xF3;n <code>.exe</code> con <code>try-catch</code> para excepciones</strong></p>
<p><strong>Fich01bFiltrar</strong></p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">B0ejer02Filtrar</span> <span class="token keyword">implements</span> <span class="token class-name">FilenameFilter</span> <span class="token punctuation">{</span>
  <span class="token class-name">String</span> extension<span class="token punctuation">;</span>
  <span class="token class-name">B0ejer02Filtrar</span><span class="token punctuation">(</span><span class="token class-name">String</span> extension<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>extension <span class="token operator">=</span> extension<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">accept</span><span class="token punctuation">(</span><span class="token class-name">File</span> dir<span class="token punctuation">,</span> <span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> name<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span>extension<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token class-name">File</span> fichero<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">&quot;C:/windows/.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> listadeArchivos <span class="token operator">=</span> fichero<span class="token punctuation">.</span><span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      listadeArchivos <span class="token operator">=</span> fichero<span class="token punctuation">.</span><span class="token function">list</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FichFiltrar</span><span class="token punctuation">(</span><span class="token string">&quot;.exe&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre><p>MIRAR EJEMPLO COMPLETO</p>
<h3 class="mume-header" id="23-rutas-de-los-ficheros">2.3 Rutas de los ficheros</h3>

<ul>
<li>El caracter separador puede variar dependiendo del sistema operativo.</li>
<li>Usaremos <code>File.separator</code> o <code>/</code>.</li>
<li>Las rutas ser&#xE1;n relativas.</li>
</ul>
<h3 class="mume-header" id="24-creaci%C3%B3n-y-eliminaci%C3%B3n-de-ficheros-y-directorios">2.4 Creaci&#xF3;n y eliminaci&#xF3;n de ficheros y directorios</h3>

<p><strong>Fich02Fich1 - Crear fichero</strong></p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">try</span> <span class="token punctuation">{</span>
  <span class="token class-name">File</span> fichero <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">&quot;./datos/miFichero.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>fichero<span class="token punctuation">.</span><span class="token function">createNewFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;El fichero se ha creado correctamente&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">else</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;No ha podido ser creado el fichero&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre><p><strong>Fich02Fich2 - Borrar fichero</strong></p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token class-name">File</span> fichero <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">&quot;./datos/miFichero.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>fichero<span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  fichero<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre><p><strong>Fich02Dir1 - Crear directorios</strong></p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">try</span> <span class="token punctuation">{</span>
  <span class="token keyword">boolean</span> exito<span class="token punctuation">;</span>
  <span class="token class-name">String</span> directorio <span class="token operator">=</span> <span class="token string">&quot;./datos&quot;</span><span class="token punctuation">;</span>
  <span class="token class-name">String</span> varios <span class="token operator">=</span> <span class="token string">&quot;./datos/carpeta1/carpeta2/carpeta3&quot;</span><span class="token punctuation">;</span>

  <span class="token class-name">File</span> dir <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>directorio<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>dir<span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    exito <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>directorio<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">mkdir</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//Un directorio</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>existo<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Directorios: &quot;</span> <span class="token operator">+</span> directorio <span class="token operator">+</span> <span class="token string">&quot; creado&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>dir<span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    existo <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>varios<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">mkdirs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//Varios directorios</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>exito<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Directorios: &quot;</span> <span class="token operator">+</span> varios <span class="token operator">+</span> <span class="token string">&quot; creados&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
 <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span>
   <span class="token class-name">System</span><span class="token punctuation">.</span>err<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Error: &quot;</span> <span class="token operator">+</span> e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre><p><strong>Fich02Dir2 - Recorrer directorio</strong></p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">try</span> <span class="token punctuation">{</span>
  <span class="token class-name">File</span> dir <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">&quot;./datos&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">File</span><span class="token punctuation">[</span><span class="token punctuation">]</span> ficheros <span class="token operator">=</span> dir<span class="token punctuation">.</span><span class="token function">listFiles</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">File</span> file <span class="token operator">:</span> ficheros<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token class-name">System</span><span class="token punctuation">.</span>err<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Error: &quot;</span> <span class="token operator">+</span> e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre><ul>
<li>Para saber si es un directorio usaremos <code>isDirectory()</code>.</li>
<li>Para borrar un directorio deben borrarse todos los ficheros y directorios que contenga.</li>
</ul>
<p><strong>Fich02Dir3</strong></p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Fich02Dir3</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token comment">// Crear carpetas y ficheros temporales</span>
    <span class="token class-name">File</span> dirtmp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">&quot;datos/tmp/files&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">File</span> fichtmp<span class="token punctuation">;</span>

    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        dirtmp<span class="token punctuation">.</span><span class="token function">mkdirs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        fichtmp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">&quot;datos/tmp/files/fichero1.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        fichtmp<span class="token punctuation">.</span><span class="token function">createNewFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        fichtmp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">&quot;datos/tmp/files/fichero2.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        fichtmp<span class="token punctuation">.</span><span class="token function">createNewFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// Mostrar carpetas y ficheros temporales</span>
    <span class="token class-name">File</span> dir <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">&quot;datos/tmp&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;------------------------------------&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">listDir</span><span class="token punctuation">(</span>dir<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Eliminar carpetas y ficheros temporales</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;------------------------------------&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">delDir</span><span class="token punctuation">(</span>dir<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">listDir</span><span class="token punctuation">(</span>dir<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">listDir</span><span class="token punctuation">(</span><span class="token class-name">File</span> dir<span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token class-name">File</span><span class="token punctuation">[</span><span class="token punctuation">]</span> ficheros <span class="token operator">=</span> dir<span class="token punctuation">.</span><span class="token function">listFiles</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">File</span> file <span class="token operator">:</span> ficheros<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span><span class="token function">getAbsolutePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;\\&quot;</span><span class="token operator">+</span>file<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>file<span class="token punctuation">.</span><span class="token function">isDirectory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
              <span class="token function">listDir</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">delDir</span><span class="token punctuation">(</span><span class="token class-name">File</span> dir<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token class-name">File</span><span class="token punctuation">[</span><span class="token punctuation">]</span> ficheros <span class="token operator">=</span> dir<span class="token punctuation">.</span><span class="token function">listFiles</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">File</span> file <span class="token operator">:</span> ficheros<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>file<span class="token punctuation">.</span><span class="token function">isDirectory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
              <span class="token function">delDir</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
          file<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</pre><h2 class="mume-header" id="3-flujos">3. Flujos</h2>

<ul>
<li>
<p>Usados para hacer operaciones de E/S.</p>
</li>
<li>
<p>Clases y m&#xE9;todos iguales en cualquier dispositivo.</p>
</li>
<li>
<p>BOM (Byte Order Mark) indica la codificacion y los bytes que ocuapa, pueden ser:</p>
<ul>
<li><strong>Unicode</strong></li>
<li><strong>UFT8</strong></li>
<li><strong>UTF16</strong></li>
</ul>
</li>
<li>
<p><code>java.io</code> define dos tipos de flujos:</p>
<ul>
<li><strong>Byte Stream (8 bits)</strong> - Para lectura y escritura de bytes, clases <code>InputStream</code> <code>OutputStream</code>,  y los m&#xE9;todos <code>read()</code> <code>write()</code>.</li>
<li><strong>Character Streams (16 bits)</strong> - Para lectura y escritura de caracteres, clases <code>Reader</code> <code>Writer</code> en Unicode,<br>
con m&#xE9;todos <code>read()</code> <code>write()</code>.</li>
</ul>
</li>
</ul>
<h2 class="mume-header" id="4-formas-de-acceso-a-un-fichero">4. Formas de acceso a un fichero</h2>

<ul>
<li>
<p>Java puede usar dos tipos de <strong>ficheros</strong> (texto o binarios) y dos tipos de <strong>acceso a ficheros</strong> (secuencial o aleatorio).</p>
</li>
<li>
<p>A veces puede encontrarse un tercero <strong>concatenaci&#xF3;n</strong> (tuberias o pipes).</p>
<p>-<strong>Acceso secuencial</strong> - Lectura de datos de principio a fin del fichero, no se sabe cuando termina la escritura.<br>
-<strong>Acceso aleatorio</strong> - Lectura desordenada, el fichero debe estar siempre disponible.<br>
-<strong>Concatenaci&#xF3;n</strong> - Ejecuci&#xF3;n simultanea, usando &quot;tubos&quot; el emisor lo env&#xED;a para el receptor que espera al final.</p>
</li>
</ul>
<h2 class="mume-header" id="5-ficheros-de-texto">5. Ficheros de Texto</h2>

<h3 class="mume-header" id="51-ficheros-de-texto-escritura">5.1 Ficheros de Texto - Escritura</h3>

<ul>
<li>
<p>Aquellos que acaban en <code>Writer</code> o <code>Reader</code> son para gestionar texto.</p>
</li>
<li>
<p>Es <strong>obligatorio</strong> usar <code>try-catch</code> para posibles errores.<br>
-<code>FileNotFoundException</code> m&#xE1;s espec&#xED;fico.<br>
-<code>IOException</code> m&#xE1;s general.</p>
</li>
</ul>
<p><strong>Fich03PrintWriter1a - Crear archivo .txt, escribir y cerrar</strong></p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Fich03PrintWriter1a</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token class-name">PrintWriter</span> printWriter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PrintWriter</span><span class="token punctuation">(</span><span class="token string">&quot;./datos/ejemplo1a.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Hola!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      printWriter<span class="token punctuation">.</span>close <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">FileNotFoundException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><ul>
<li>Alternativa menos elegante, pero m&#xE1;s compacta &#xFA;til para fuentes de peque&#xF1;o tama&#xF1;o usaremos <code>throws</code>.</li>
</ul>
<p><strong>Fich03PrintWriter1b - Lanzar excepci&#xF3;n desde el <code>Main</code></strong></p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Fich03PrintWriter1b</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">FileNotFoundException</span> <span class="token punctuation">{</span>
    <span class="token class-name">PrintWriter</span> printWriter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PrintWriter</span> <span class="token punctuation">(</span><span class="token string">&quot;./datos/ejemplo1b.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    printWriter<span class="token punctuation">.</span>println <span class="token punctuation">(</span><span class="token string">&quot;Hola!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    printWriter<span class="token punctuation">.</span>close <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
</pre><ul>
<li>
<p>Para evitar errores y impedir cierre del fichero usaremos <code>try-catch-finally</code>.</p>
</li>
<li>
<p>Cualquier error de E/S usaremos <code>IOException</code>.</p>
</li>
<li>
<p>Usar <code>import java.io.*</code> en lugar de individuales.</p>
</li>
</ul>
<p><strong>Fich03PrintWriter2 - Interceptar errores y cierre de fichero</strong></p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Fich03PrintWriter2</span> <span class="token punctuation">{</span>
 <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token class-name">PrintWriter</span> printWriter <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
   <span class="token keyword">try</span> <span class="token punctuation">{</span>
     printWriter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PrintWriter</span><span class="token punctuation">(</span><span class="token string">&quot;./datos/ejemplo2.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Hola!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;y...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;hasta luego!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//Interceptar errores</span>
     e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
     <span class="token keyword">if</span> <span class="token punctuation">(</span> printWriter <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
       printWriter<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Asegurar cierre del fichero</span>
     <span class="token punctuation">}</span>
   <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><ul>
<li>
<p>El constructor habitual <code>PrinterWriter</code> destruye el contenido del fichero en caso de existir.</p>
</li>
<li>
<p>Para a&#xF1;adir al final del fichero, se usa <code>BufferedWritter</code> que se apoya en <code>FileWriter</code> y <code>true</code> para a&#xF1;adir al final.</p>
</li>
</ul>
<p><strong>Fich03PrintWriter3 - A&#xF1;adir al final de un fichero</strong></p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Fich03PrintWriter3</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">PrintWriter</span> printWriter <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      printWriter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PrintWriter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">BufferedWriter</span><span class="token punctuation">(</span>
         <span class="token keyword">new</span> <span class="token class-name">FileWriter</span><span class="token punctuation">(</span><span class="token string">&quot;./datos/ejemplo3.txt&quot;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// No sobrescribir</span>
      printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Hola otra vez!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;y...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      printWriter<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;hasta luego!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span> printWriter <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
        printWriter<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><ul>
<li>
<p>Se puede usar directamente un <code>BufferedWriter</code> para escribir sin tener que usar <code>PrintWriter</code>.</p>
</li>
<li>
<p>Es una clase de m&#xE1;s bajo nivel, no incluye <code>println</code>.</p>
</li>
<li>
<p>Debemos usar <code>write</code> para escribir y <code>newLine</code> para salto de l&#xED;nea.</p>
</li>
</ul>
<p><strong>Fich03BufferedWriter1 - Alternativa a <code>PrinterWriter</code></strong></p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Fich03BufferedWriter1</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">BufferedWriter</span> ficheroSalida <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      ficheroSalida <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedWriter</span><span class="token punctuation">(</span>
          <span class="token keyword">new</span> <span class="token class-name">FileWriter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">&quot;./datos/ejemplo4.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      ficheroSalida<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;L&#xED;nea 1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      ficheroSalida<span class="token punctuation">.</span><span class="token function">newLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      ficheroSalida<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;L&#xED;nea 2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      ficheroSalida<span class="token punctuation">.</span><span class="token function">newLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Ha habido problemas: &quot;</span> <span class="token operator">+</span> e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
      <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span> ficheroSalida <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
          ficheroSalida<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
      <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Ha habido problemas: &quot;</span> <span class="token operator">+</span> e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><ul>
<li>Para evitar el <code>finally</code> es usar <code>try-with-resources</code> indicando que se cerrar&#xE1; al acabar el <code>try</code>.</li>
</ul>
<p><strong>Fich03BufferedWriter2 - Using para cerrra fichero</strong></p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Fich03BufferedWriter2</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">BufferedWriter</span> ficheroSalida <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedWriter</span><span class="token punctuation">(</span>
            <span class="token keyword">new</span> <span class="token class-name">FileWriter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">&quot;./datos/ejemplo4.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      ficheroSalida<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;L&#xED;nea 1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      ficheroSalida<span class="token punctuation">.</span><span class="token function">newLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      ficheroSalida<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;L&#xED;nea 2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      ficheroSalida<span class="token punctuation">.</span><span class="token function">newLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>  <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Ha habido problemas: &quot;</span> <span class="token operator">+</span> e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
</pre><h2 class="mume-header" id="52-ficheros-de-texto-lectura">5.2 Ficheros de Texto - Lectura</h2>

<ul>
<li>
<p>Para leer l&#xED;nea a l&#xED;nea usaremos <code>BufferedReader</code>, se apoyar&#xE1; <code>FileReader</code>.</p>
</li>
<li>
<p>Tiene un m&#xE9;todo <code>readLine</code> que devuelve un String.</p>
</li>
<li>
<p>Si ese String es null, significa que es el final del fichero.</p>
</li>
<li>
<p>Habitual usar un <code>while</code> o <code>do-while</code> para leer el contenido del fichero.</p>
</li>
</ul>
<p><strong>Fich04BufferedReader1 - Leer fichero</strong></p>
<pre data-role="codeBlock" data-info="Java" class="language-java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Fich04BufferedReader1</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token comment">// Primero vemos si el fichero existe</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span> <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">&quot;./datos/ejemplo3.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;No he encontrado ejemplo.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// En caso de que exista, intentamos leer</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Leyendo fichero...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">BufferedReader</span> ficheroEntrada <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedReader</span><span class="token punctuation">(</span>
    <span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">&quot;./datos/ejemplo3.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token class-name">String</span> linea <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

    linea <span class="token operator">=</span> ficheroEntrada<span class="token punctuation">.</span><span class="token function">readLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>linea <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>linea<span class="token punctuation">)</span><span class="token punctuation">;</span>
        linea <span class="token operator">=</span> ficheroEntrada<span class="token punctuation">.</span><span class="token function">readLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span> <span class="token string">&quot;Ha habido problemas: &quot;</span> <span class="token operator">+</span> e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Fin de la lectura.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><ul>
<li>Para hacerlo m&#xE1;s compacto, pero menos legible lo ponemos en la misma orden.</li>
</ul>
<pre data-role="codeBlock" data-info="Java" class="language-java"><span class="token class-name">String</span> linea<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>linea<span class="token operator">=</span>ficheroEntrada<span class="token punctuation">.</span><span class="token function">readLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>linea<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre><ul>
<li>Se podr&#xE1; crear un clase Fichero con los m&#xE9;todos:
<ul>
<li><code>public static void MostrarFichero(String sFich)</code></li>
<li><code>public static void Leer(String sFich)</code></li>
<li><code>public static void ExisteFichero(String sFich)</code></li>
</ul>
</li>
</ul>
<p><strong>Fich04BufferedReader2</strong></p>
<pre data-role="codeBlock" data-info="Java" class="language-java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>

<span class="token comment">// Clase Fichero</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Fichero</span> <span class="token punctuation">{</span>

  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token class-name">MostrarFichero</span><span class="token punctuation">(</span><span class="token class-name">String</span> sFich<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token class-name">Leer</span><span class="token punctuation">(</span><span class="token class-name">String</span> sFich<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">boolean</span> <span class="token function">existeFichero</span><span class="token punctuation">(</span><span class="token class-name">String</span> sFich<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// Programa Principal</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Fich04BufferedReader2</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;LEER FICHERO&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Fichero<span class="token punctuation">.</span>MostrarFichero</span><span class="token punctuation">(</span><span class="token string">&quot;./datos/ejemplo3.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;LEER FICHERO&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Fichero<span class="token punctuation">.</span>MostrarFichero</span><span class="token punctuation">(</span><span class="token string">&quot;./datos/ejemplo-no-existe.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><h2 class="mume-header" id="53-ficheros-de-texto-resumen">5.3 Ficheros de Texto - Resumen</h2>

<ul>
<li>
<p>Para los flujos de caracteres existen dos clases <code>Reader</code> y <code>Writer</code></p>
<ul>
<li>
<p>Cuando se usan <code>FileInputStream</code>, <code>FileOutputStream</code>, <code>FileReader</code>, <code>FileWriter</code>, las lecturas y escrituras se hacen f&#xED;sicamente en el disco duro. En caso de leer o escribir pocos caracteres, es lento y costoso.</p>
</li>
<li>
<p><code>BufferedReader</code>, <code>BufferedInputStream</code>, <code>BufferedWriter</code>, <code>BufferedOutputStream</code> a&#xF1;aden un buffer intermedio, escribiendo hasta que haya bastantes datos para realizar una escritura eficiente. M&#xE1;s eficiente y r&#xE1;pido.</p>
</li>
</ul>
</li>
</ul>
<p><strong>Fich05EscribirTexto - Escribir en fichero y forzar escritura</strong></p>
<pre data-role="codeBlock" data-info="Java" class="language-java"><span class="token class-name">File</span> archivo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span> <span class="token punctuation">(</span><span class="token string">&quot;./datos/archivotexto.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Apertura del fichero y creaci&#xF3;n de BufferedWriter</span>
<span class="token keyword">try</span> <span class="token punctuation">(</span> <span class="token class-name">FileWriter</span> fw <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileWriter</span> <span class="token punctuation">(</span>archivo<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token class-name">BufferedWriter</span> bw <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedWriter</span><span class="token punctuation">(</span>fw<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token comment">// Escritura en el fichero</span>
    bw<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;Este es un fichero de texto&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    bw<span class="token punctuation">.</span><span class="token function">newLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    bw<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;que contiene varias l&#xED;neas\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    bw<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;y se crea con BufferedWriter.\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Forzamos la escritura en disco</span>
    bw<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre><ul>
<li>
<p>Para crear fichero y forzar la codificaci&#xF3;n en UTF8 usaremos <code>FileOutputStream</code> + <code>OutputStreamWriter</code> + <code>BufferedWriter</code>.</p>
</li>
<li>
<p>Con <code>FileOutputStream</code> indicaremos el fichero si sobreescribir&#xE1; o a&#xF1;adir&#xE1; el contenido.</p>
</li>
</ul>
<p><strong>Fich05EscribirTextoUTF8 - Codificaci&#xF3;n y sobrescritura de un fichero</strong></p>
<pre data-role="codeBlock" data-info="Java" class="language-java"><span class="token class-name">File</span> archivo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span> <span class="token punctuation">(</span><span class="token string">&quot;./datos/archivotextoUTF8.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Apertura del fichero y creaci&#xF3;n de BufferedWriter</span>
<span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">BufferedWriter</span> bw
    <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedWriter</span><span class="token punctuation">(</span>
        <span class="token keyword">new</span> <span class="token class-name">OutputStreamWriter</span><span class="token punctuation">(</span>
          <span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span>archivo<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">StandardCharsets</span><span class="token punctuation">.</span>UTF_8<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token comment">// Escritura en el fichero</span>
    bw<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;Este es un fichero de texto&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    bw<span class="token punctuation">.</span><span class="token function">newLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    bw<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;que contiene varias l&#xED;neas\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    bw<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;y se crea con BufferedWriter.\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre><p><strong>Fich05LeerTexto - Leer fichero</strong></p>
<pre data-role="codeBlock" data-info="Java" class="language-java"><span class="token class-name">File</span> archivo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span> <span class="token punctuation">(</span><span class="token string">&quot;./datos/archivotexto.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Apertura del fichero y creacion de BufferedReader</span>
<span class="token keyword">try</span> <span class="token punctuation">(</span> <span class="token class-name">FileReader</span> fr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span>archivo<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token class-name">BufferedReader</span> br <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedReader</span><span class="token punctuation">(</span>fr<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token comment">// Lectura del fichero</span>
    <span class="token class-name">String</span> linea<span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span> <span class="token punctuation">(</span>linea<span class="token operator">=</span>br<span class="token punctuation">.</span><span class="token function">readLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>linea<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre><p><strong>Fich05LeerTextoUTF8 - Lectura forzada en UTF8</strong></p>
<pre data-role="codeBlock" data-info="Java" class="language-java"><span class="token class-name">File</span> archivo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span> <span class="token punctuation">(</span><span class="token string">&quot;./datos/archivotexto.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Apertura del fichero y creaci&#xF3;n de BufferedReader</span>
<span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">BufferedReader</span> br
        <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedReader</span><span class="token punctuation">(</span>
            <span class="token keyword">new</span> <span class="token class-name">InputStreamReader</span><span class="token punctuation">(</span>
              <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span>archivo<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">StandardCharsets</span><span class="token punctuation">.</span>UTF_8<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token comment">// Lectura del fichero</span>
    <span class="token class-name">String</span> linea<span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span> <span class="token punctuation">(</span>linea<span class="token operator">=</span>br<span class="token punctuation">.</span>=<span class="token operator">=</span>readLine<span class="token operator">==</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>linea<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre><ul>
<li>
<p>Hay ficheros de configuraci&#xF3;n que almacenan estructuras de datos en formato texto, son las propiedades.</p>
</li>
<li>
<p>Java tiene una clase <code>Properties</code> que almacena en RAM la clave y valor, adem&#xE1;s de un m&#xE9;todo que graba la informaci&#xF3;n en un fichero de texto.</p>
</li>
</ul>
<p><strong>Fich06EscribirProperties - Escribir datos</strong></p>
<pre data-role="codeBlock" data-info="Java" class="language-java"><span class="token comment">// Crear Fichero</span>
<span class="token class-name">Properties</span> props <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">FileOutputStream</span> fos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span><span class="token string">&quot;./datos/usuario.properties&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Almacenar datos</span>
    <span class="token comment">// props.setProperty() es equivalente a properties.put()</span>
props<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">&quot;usuario&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;juan&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
props<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">&quot;email&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;juan@dominio.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Escribir las propiedades en el fichero</span>
props<span class="token punctuation">.</span><span class="token function">store</span><span class="token punctuation">(</span>fos<span class="token punctuation">,</span> <span class="token string">&quot;Fichero de propiedades generado desde programa Java&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Cerrar fichero</span>
fos<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre><p><strong>Fich06LeerProperties - Leer datos</strong></p>
<pre data-role="codeBlock" data-info="Java" class="language-java"><span class="token comment">// Preparar Variables</span>
<span class="token class-name">Properties</span> properties <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">FileInputStream</span> fis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">&quot;./datos/usuario.properties&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// Leer datos</span>
  properties<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>fis<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// Cerrar fichero</span>
  fis<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// Mostrar todas las propiedades</span>
  <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Properties......: &quot;</span> <span class="token operator">+</span> properties<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// Mostrar todas las claves</span>
  <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Claves..........: &quot;</span> <span class="token operator">+</span> properties<span class="token punctuation">.</span><span class="token function">keySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// Mostrar valor de una clave</span>
  <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Valor de usuario: &quot;</span> <span class="token operator">+</span>
  properties<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">&quot;usuario&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// Recorrer todas las propiedades</span>
  <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;------------------&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  properties<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>k<span class="token punctuation">,</span> v<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
  <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Clave: &quot;</span> <span class="token operator">+</span> k<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Valor: &quot;</span> <span class="token operator">+</span> v<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;------------------&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre><h1 class="mume-header" id="6-ficheros-binarios">6. Ficheros Binarios</h1>

<h2 class="mume-header" id="61-ficheros-binarios-escritura">6.1 Ficheros Binarios - escritura</h2>

<ul>
<li>
<p>Para el tratamiento de los flujos de bytes hay dos clases abstractas que son <code>InputStream</code> y <code>OutputStream</code>.</p>
</li>
<li>
<p>Cuando guardan texto, realemente se guarda su representaci&#xF3;n en UTF-8.</p>
</li>
<li>
<p>Las clases principales que heredan de <code>OutputStream</code>, para la escritura de ficheros son:</p>
<ul>
<li>
<p><code>FileOutputStream</code></p>
<ul>
<li>Escribe bytes en un fichero.</li>
<li>Si existe el fichero, se sobreescribir&#xE1;.</li>
<li>Para a&#xF1;adir datos al final se usa <code>Java FileOutputStream(String filePath, boolean true)</code></li>
</ul>
</li>
<li>
<p><code>ObjectOutputStream</code></p>
<ul>
<li>Convierte variables y objetos en vectores de bytes, que pueden ser escritos en un <code>ObjectOutputStream</code>.</li>
</ul>
</li>
<li>
<p><code>DataOutputStream</code></p>
<ul>
<li>Da formato a los tipos primitivos y objetos String</li>
<li>Generando un flujo que cualquier <code>DataIntputStream</code> pueda leerlos.</li>
<li>Todos los m&#xE9;todos empiezan por <code>write</code>.</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Destacamos <code>InputStream</code> para lectura de ficheros:</p>
<ul>
<li><code>FileInputStream</code> lee bytes de un fichero.</li>
<li><code>ObjectInputStream</code> convierte variables y objetos en vectores de bytes, que pueden ser le&#xED;dos en un <code>ObjectInputStream</code>.</li>
</ul>
</li>
</ul>
<p><strong>Fich07EscribirBinario - Escribir fichero binario con <code>DataOutputStream</code></strong></p>
<pre data-role="codeBlock" data-info="Java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Fich07EscribirBinario</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span> args<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">String</span> texto <span class="token operator">=</span> &quot;<span class="token class-name">Esto</span> es un texto para almacenarlo\n
    en el archivo binario<span class="token punctuation">.</span>\n&quot;<span class="token punctuation">;</span>
    <span class="token class-name">String</span> fileName <span class="token operator">=</span> <span class="token string">&quot;./datos/datosbinarios.dat&quot;</span> <span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">(</span>
          <span class="token comment">// Se declara un objeto de tipo DataOutputStream</span>
          <span class="token class-name">FileOutputStream</span> foStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span>fileName<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token class-name">DataOutputStream</span> doStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DataOutputStream</span> <span class="token punctuation">(</span>foStream<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">)</span> <span class="token punctuation">{</span>
      doStream<span class="token punctuation">.</span><span class="token function">writeUTF</span><span class="token punctuation">(</span>texto<span class="token punctuation">)</span><span class="token punctuation">;</span>
      doStream<span class="token punctuation">.</span><span class="token function">writeInt</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>Pag 24</p>
<h2 class="mume-header" id="62-ficheros-binarios-lectura">6.2 Ficheros Binarios - Lectura</h2>

<ul>
<li>Un fichero binario puede contener cualquier cosa adem&#xE1;s de texto.</li>
</ul>
<p><strong>Fich07LeerBinario</strong></p>
<pre data-role="codeBlock" data-info="Java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Fich08LeerBinario</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span> args<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">String</span> texto<span class="token punctuation">;</span>
    <span class="token keyword">int</span> entero<span class="token punctuation">;</span>

    <span class="token class-name">String</span> fileName <span class="token operator">=</span> <span class="token string">&quot;./datos/datosbinarios.dat&quot;</span> <span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">(</span>
          <span class="token class-name">FileInputStream</span> foStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span>fileName<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token class-name">DataInputStream</span> doStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DataInputStream</span> <span class="token punctuation">(</span>foStream<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">)</span> <span class="token punctuation">{</span>

      texto <span class="token operator">=</span> doStream<span class="token punctuation">.</span><span class="token function">readUTF</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      entero <span class="token operator">=</span> doStream<span class="token punctuation">.</span><span class="token function">readInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;String: &quot;</span> <span class="token operator">+</span> texto<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Int: &quot;</span> <span class="token operator">+</span> entero<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><ul>
<li>
<p>Se puede acceder  allos con un fichero <code>FileInputStream</code> y leer byte a byte con <code>read()</code></p>
</li>
<li>
<p>El dato debe leerse como un <code>int</code> y un valor -1 indica el final del fichero.</p>
</li>
</ul>
<p><strong>Fich08FileInputStream1 - Contar cantidad de letras a</strong></p>
<pre data-role="codeBlock" data-info="Java" class="language-java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Fich08FileInputStream1</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>

  <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Contando \&quot;a\&quot;...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">int</span> contador <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

  <span class="token keyword">try</span> <span class="token punctuation">(</span>
      <span class="token class-name">FileInputStream</span> ficheroEntrada <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span>
      <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">&quot;./datos/fichero.bin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">)</span> <span class="token punctuation">{</span>

  <span class="token keyword">int</span> dato <span class="token operator">=</span> ficheroEntrada<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span>dato <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>dato <span class="token operator">==</span> <span class="token number">97</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// Codigo ASCII de &quot;a&quot;</span>
    contador<span class="token operator">++</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
    dato <span class="token operator">=</span> ficheroEntrada<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span> <span class="token string">&quot;Ha habido problemas: &quot;</span> <span class="token operator">+</span> e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Cantidad de \&quot;a\&quot;: &quot;</span> <span class="token operator">+</span> contador<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p><strong>Fich08FileInputStream2 - Abreviar la lectura y la comprobaci&#xF3;n</strong></p>
<pre data-role="codeBlock" data-info="Java" class="language-java"><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  <span class="token keyword">int</span> dato<span class="token punctuation">;</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>dato <span class="token operator">=</span> ficheroEntrada<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>dato <span class="token operator">==</span> <span class="token number">97</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// Codigo ASCII de &quot;a&quot;</span>
      contador<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</pre><h2 class="mume-header" id="63-ficheros-binarios-lectura-y-escritura-por-bloques">6.3 Ficheros Binarios &#x2013; Lectura y escritura por bloques</h2>

<ul>
<li>Si hay muchos datos acceder byte a byte es muy lento.</li>
<li>Un array de bytes es m&#xE1;s eficiente</li>
<li>Se usar&#xE1; un <code>InputStream</code> y su m&#xE9;todo <code>read</code> para indicar en que array se desea guardar los datos, la posici&#xF3;n (default 0) y la cantidad de datos.</li>
</ul>
<p><strong>Fich09FicheroBinarioBloques - Leer cada bloque de 512 Kb</strong></p>
<pre data-role="codeBlock" data-info="Java" class="language-java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Fich09FicheroBinarioBloques</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">File</span> fichIn <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">&quot;./datos/fichero.in&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">File</span> fichOut <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">&quot;./datos/fichero.out&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Copiando fichero binario...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">final</span> <span class="token keyword">int</span> BUFFER_SIZE <span class="token operator">=</span> <span class="token number">512</span><span class="token operator">*</span><span class="token number">1024</span><span class="token punctuation">;</span>

    <span class="token keyword">try</span> <span class="token punctuation">(</span>
          <span class="token class-name">InputStream</span> ficheroEntrada <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span> fichIn <span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token class-name">OutputStream</span> ficheroSalida <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span> fichOut <span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> buf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span>BUFFER_SIZE<span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token keyword">int</span> cantidadLeida<span class="token punctuation">;</span>
      <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>cantidadLeida <span class="token operator">=</span> ficheroEntrada<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>buf<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> BUFFER_SIZE<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        ficheroSalida<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>buf<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> cantidadLeida<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> errorDeFichero<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span> <span class="token string">&quot;Ha habido problemas: &quot;</span> <span class="token operator">+</span> errorDeFichero<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Terminado!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><h1 class="mume-header" id="7-acceso-secuencial">7. Acceso secuencial</h1>

<ul>
<li>Como operaciones m&#xE1;s comunes tenemos:
<ul>
<li>Crear un fichero o abrirlo para grabar datos.</li>
<li>Leer datos del fichero.</li>
<li>Borrar informaci&#xF3;n de un fichero.</li>
<li>Copiar datos de un fichero a otro.</li>
<li>B&#xFA;squeda de informaci&#xF3;n en un fichero.</li>
<li>Cerrar un fichero.</li>
</ul>
</li>
</ul>
<p><strong>Fich10EscribirSecuencial - Crea fichero si no existe o a&#xF1;ade datos si existe</strong></p>
<pre data-role="codeBlock" data-info="Java" class="language-java"><span class="token class-name">String</span> strFichero <span class="token operator">=</span> <span class="token string">&quot;./datos/secuencial.dat&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> edad <span class="token operator">=</span> <span class="token number">32</span><span class="token punctuation">;</span>

<span class="token comment">// Abir, capturar y grabar datos</span>
<span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">DataOutputStream</span> archivo
          <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DataOutputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span>strFichero<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token comment">// Escribir nombre, apellidos y edad</span>
    archivo<span class="token punctuation">.</span><span class="token function">writeUTF</span><span class="token punctuation">(</span><span class="token string">&quot;Juan&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    archivo<span class="token punctuation">.</span><span class="token function">writeUTF</span><span class="token punctuation">(</span><span class="token string">&quot;S&#xE1;nchez&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    archivo<span class="token punctuation">.</span><span class="token function">writeInt</span><span class="token punctuation">(</span>edad<span class="token punctuation">)</span><span class="token punctuation">;</span>

    archivo<span class="token punctuation">.</span><span class="token function">writeUTF</span><span class="token punctuation">(</span><span class="token string">&quot;Pedro&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    archivo<span class="token punctuation">.</span><span class="token function">writeUTF</span><span class="token punctuation">(</span><span class="token string">&quot;G&#xF3;mez&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    archivo<span class="token punctuation">.</span><span class="token function">writeInt</span><span class="token punctuation">(</span><span class="token number">35</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    archivo<span class="token punctuation">.</span><span class="token function">writeUTF</span><span class="token punctuation">(</span><span class="token string">&quot;Ana&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    archivo<span class="token punctuation">.</span><span class="token function">writeUTF</span><span class="token punctuation">(</span><span class="token string">&quot;P&#xE9;rez&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    archivo<span class="token punctuation">.</span><span class="token function">writeInt</span><span class="token punctuation">(</span><span class="token number">27</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>strFichero <span class="token operator">+</span> <span class="token string">&quot; creado.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</pre><ul>
<li>Para introducir argumentos en <strong>NetBeans</strong> debemos de:
<ul>
<li>Seleccionar <strong>Run</strong> en los ajustes.</li>
<li>Dentro de <strong>arguments</strong> ponemos los argumentos separados por espacios.</li>
</ul>
</li>
</ul>
<p><strong>Fich11CopiarFichero - Usar fichero para escritura de bytes</strong></p>
<pre data-role="codeBlock" data-info="Java" class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span> args<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token class-name">String</span> strfuente <span class="token operator">=</span> <span class="token string">&quot;./datos/datosbinarios.dat&quot;</span><span class="token punctuation">;</span>
  <span class="token class-name">String</span> strdestino<span class="token operator">=</span> <span class="token string">&quot;./datos/datosbinarioscopia.dat&quot;</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>args<span class="token punctuation">.</span>length<span class="token operator">&gt;=</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    strfuente <span class="token operator">=</span> args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    strdestino <span class="token operator">=</span> args<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">try</span> <span class="token punctuation">(</span>
    <span class="token comment">// El fichero fuente es el primer par&#xE1;metro</span>
    <span class="token class-name">FileInputStream</span> fuente <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span>strfuente<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// El fichero destino es el segundo par&#xE1;metro.</span>
    <span class="token class-name">FileOutputStream</span> destino <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span>strdestino<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token comment">// Leer del fuente hasta llegar la fin de archivo</span>
    <span class="token keyword">int</span> i <span class="token operator">=</span> fuente<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>i <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// mientras not EOF</span>
    destino<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    i <span class="token operator">=</span> fuente<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><ul>
<li>
<p>Para mejorar la eficiencia de la aplicaci&#xF3;n reduciendo el n&#xBA; de accesos a<br>
los dispositivos de salida donde est&#xE1; el fichero, montamos un buffer<br>
asociado al flujo de tipo <code>FileOutputStream</code>.</p>
</li>
<li>
<p><code>BufferedOutputStream</code>, permite que la aplicaci&#xF3;n pueda escribir bytes<br>
en el flujo sin que tener que llamar al SO para cada byte escrito.</p>
</li>
<li>
<p>Cuando se trabaja con ficheros de texto se recomienda usar <code>Reader</code>, para<br>
entrada o lectura de caracteres, y <code>Writer</code> para salida o escritura de caracteres.</p>
</li>
<li>
<p>Estas clases est&#xE1;n optimizan trabajar con caracteres y texto en general,<br>
tienen en cuenta que cada car&#xE1;cter Unicode est&#xE1; representado por dos<br>
bytes.</p>
</li>
<li>
<p>Las subclases de <code>Writer</code> y <code>Reader</code> que permiten trabajar con ficheros de texto son:</p>
<ul>
<li><code>FileReader</code>, lectura desde un fichero de texto. Crea un flujo de entrada<br>
que trabaja con caracteres en vez de con bytes.</li>
<li><code>FileWriter</code>, escritura hacia un fichero de texto. Crea un flujo de salida que<br>
trabaja con caracteres en vez de con bytes.</li>
</ul>
</li>
<li>
<p>Tambi&#xE9;n se puede montar un buffer sobre cualquiera de los flujos que definen estas<br>
clases:</p>
<ul>
<li><code>BufferedWriter</code> se usa para montar un buffer sobre un flujo de salida de tipo<br>
<code>FileWriter</code>.</li>
<li><code>BufferedReader</code> se usa para montar un buffer sobre un flujo de entrada de tipo<br>
<code>FileReader</code>.</li>
</ul>
</li>
</ul>
<p><strong>Fich12LeerSecuencial - Lectura fichero secuencial</strong></p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token class-name">String</span> nombre <span class="token operator">=</span> <span class="token string">&quot;&quot;</span> <span class="token punctuation">;</span>
<span class="token class-name">String</span> apellidos <span class="token operator">=</span> <span class="token string">&quot;&quot;</span> <span class="token punctuation">;</span>
<span class="token keyword">int</span> edad <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span>

<span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">DataInputStream</span> archivo
<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DataInputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">&quot;./datos/secuencial.dat&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token comment">// Leer archivo</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span> archivo<span class="token punctuation">.</span><span class="token function">available</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>

      nombre    <span class="token operator">=</span> archivo<span class="token punctuation">.</span><span class="token function">readUTF</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      apellidos <span class="token operator">=</span> archivo<span class="token punctuation">.</span><span class="token function">readUTF</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      edad      <span class="token operator">=</span> archivo<span class="token punctuation">.</span><span class="token function">readInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;------------------------------&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Nombre: &quot;</span><span class="token operator">+</span>nombre<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Apellidos: &quot;</span><span class="token operator">+</span>apellidos<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Edad: &quot;</span><span class="token operator">+</span>edad<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;------------------------------&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</pre><h3 class="mume-header" id="operaciones-b%C3%A1sicas-sobre-ficheros-de-acceso-secuencial">Operaciones b&#xE1;sicas sobre ficheros de acceso secuencial</h3>

<p><strong>Fich13LeerConBuffer - Lectura fichero txt usando <code>BufferReader</code></strong></p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token class-name">String</span> texto <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">try</span> <span class="token punctuation">(</span>
      <span class="token class-name">FileReader</span> fichero <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span><span class="token string">&quot;./datos/archivotexto.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token class-name">BufferedReader</span> buffer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedReader</span><span class="token punctuation">(</span>fichero<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment">// Leemos el texto usando el metodo readLine()</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>texto <span class="token operator">=</span> buffer<span class="token punctuation">.</span><span class="token function">readLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>texto<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</pre><p>**Fich14BuscarSecuencial **</p>
<pre data-role="codeBlock" data-info="java" class="language-java"><span class="token keyword">boolean</span> encontrado <span class="token operator">=</span> <span class="token boolean">false</span> <span class="token punctuation">;</span>
<span class="token class-name">String</span> nombre<span class="token punctuation">;</span>
<span class="token class-name">String</span> apellidos<span class="token punctuation">;</span>
<span class="token keyword">int</span> edad<span class="token punctuation">;</span>

<span class="token class-name">String</span> busqueda <span class="token operator">=</span> <span class="token string">&quot;Pedro&quot;</span> <span class="token punctuation">;</span>

<span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">DataInputStream</span> archivo
      <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DataInputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">&quot;./datos/secuencial.dat&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token comment">// Leer archivo</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span> <span class="token punctuation">(</span><span class="token operator">!</span>encontrado<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>archivo<span class="token punctuation">.</span><span class="token function">available</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>

      <span class="token comment">// Leer el nombre</span>
      nombre <span class="token operator">=</span> archivo<span class="token punctuation">.</span><span class="token function">readUTF</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token comment">// Si el nombre es el que buscamos</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>busqueda<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>nombre<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        encontrado <span class="token operator">=</span> <span class="token boolean">true</span> <span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Registro Encontrado!!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// Leer los otros campos</span>
        apellidos <span class="token operator">=</span> archivo<span class="token punctuation">.</span><span class="token function">readUTF</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        edad <span class="token operator">=</span> archivo<span class="token punctuation">.</span><span class="token function">readInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Nombre: &quot;</span> <span class="token operator">+</span> nombre<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Apellidos: &quot;</span> <span class="token operator">+</span> apellidos<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Edad: &quot;</span> <span class="token operator">+</span> edad<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">// Leer los otros campos</span>
        apellidos <span class="token operator">=</span> archivo<span class="token punctuation">.</span><span class="token function">readUTF</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        edad <span class="token operator">=</span> archivo<span class="token punctuation">.</span><span class="token function">readInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>encontrado<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Registro NO Encontrado!!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</pre><h1 class="mume-header" id="8-acceso-aleatorio">8. Acceso aleatorio</h1>

<ul>
<li>
<p>Cuando necesitamos acceder al fichero como si fuera una BD, saltando de registro, usamos <code>RandomAccessFile</code> para la entrada/salida.</p>
<ul>
<li>Permite:
<ul>
<li>Permite leer y escribir sobre el fichero, no es necesario dos clases diferentes.</li>
<li>Necesita especificaci&#xF3;n al modo de acceso, al construir un objeto de<br>
esta clase: s&#xF3;lo lectura o bien lectura y escritura.</li>
<li>Posee m&#xE9;todos espec&#xED;ficos de desplazamiento como <code>seek(long posicion)</code> o<br>
<code>skipBytes(int desplazamiento)</code> para poder movernos de un registro a otro o una posici&#xF3;n concreta.</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Se necesita conocer su tama&#xF1;o de antemano.</p>
</li>
<li>
<p>Posee dos constructores:</p>
<ul>
<li><code>RandomAccessFile(File file, String mode)</code></li>
<li><code>RandomAccessFile(String name, String mode)</code></li>
</ul>
</li>
<li>
<p>El modo  &quot;r&quot; si se abre en modo lectura o &quot;rw&quot; si se<br>
abre en modo lectura y escritura.</p>
</li>
</ul>
<p><strong>Fich15EscribirAleatorio - Como abrir y escribir en un fichero de acceso aleatorio</strong></p>
<pre data-role="codeBlock" data-info="Java" class="language-java"><span class="token keyword">try</span> <span class="token punctuation">(</span> <span class="token class-name">RandomAccessFile</span> miRandomFile
          <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RandomAccessFile</span><span class="token punctuation">(</span> <span class="token string">&quot;./datos/aleatorio.bin&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;rw&quot;</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token comment">// Nos vamos al final del fichero</span>
    miRandomFile<span class="token punctuation">.</span><span class="token function">seek</span><span class="token punctuation">(</span> miRandomFile<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Incorporamos la cadena al fichero</span>
    <span class="token class-name">String</span> texto <span class="token operator">=</span> <span class="token string">&quot;Cadena a escribir\n&quot;</span><span class="token punctuation">;</span>
    miRandomFile<span class="token punctuation">.</span><span class="token function">writeBytes</span><span class="token punctuation">(</span>texto<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</pre>
      </div>
      
      
    
    
    
    
    
    
    
    
  
    </body></html>